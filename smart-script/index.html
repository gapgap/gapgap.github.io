<!DOCTYPE html>
<!-- saved from url=(0070)file:///Users/gab.t/Documents/GitHub/gabbanner/smart-script/index.html -->
<html lang="en" class="site MS__UVNLaXanh"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        

    <title>AAA MMO Open World - Tuyệt Đối Điện Ảnh</title>
    <script src="https://onelinksmartscript.appsflyer.com/onelink-smart-script-latest.js"></script>

    <script>
      // @@@@ Section START - Fire an impression @@@@


      // The impression is created using the Smart Script.
      // In order to create an impression the Smart Script requires a OneLink template, with cross-platform attribution enabled.


      // Firing an imperssion includes the following steps:
      // 1. Initializing the Smart Script arguments. These arguments will carry the impression data, e.g. media_source, campaign, ad_name etc.
      //    The argument values are retrieved from the incoming URL query parameters (e.g. UTM parameters) or default values.
      //    Information regarding more Smart Script arguments can be found here https://dev.appsflyer.com/hc/docs/dl_smart_script_v2#arguments.
      // 2. Call the Smart Script method generateOneLinkURL(). The method generates the infrastructure to fire an impression in the next step.
      //    Information regarding this method can be found here https://dev.appsflyer.com/hc/docs/dl_smart_script_v2#manually-configure-the-script
      // 3. Fire an impression - verify the method generateOneLinkURL was successful and call the method fireImpressionsLink() to fire the impression.


      // -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-


      // ** Step 1 ** Initializing Smart Script arguments
      // TODO: change to your onelink template URL
      var oneLinkURL = "https://nthvng.onelink.me/VEl1";
      // TODO: Define the mapping of incoming URL parameters to outgoing parameters (impression and install links)
      var channel = { keys: ["utm_channel"] };
      var mediaSource = {
        keys: ["utm_source"],
        defaultValue: "game_media_source",
      };
      var campaign = {
        keys: ["utm_campaign"],
        defaultValue: "game_landing_page",
      };
      var ad = {
        keys: ["utm_content"],
        defaultValue: "game_ad_name",
      };
      var adset = { keys: ["adset_name"], defaultValue: "game_adset_name" };
      // extracting parameters for facebook click
      var afSub2 = { keys: ["fbclid"] };
      var googleClickIdKey = "af_sub4";
      var gclid_out = { paramKey: "gclid", keys: ["gclid"] }
      var fbclid_out = { paramKey: "fbclid", keys: ["fbclid"] }
      var afParameters = {
        mediaSource: mediaSource,
        campaign: campaign,
        ad: ad,
        adSet: adset,
        afSub2: afSub2,
        googleClickIdKey: googleClickIdKey,
        afCustom: [
          // !!! IMPORTANT !!!
          // The following param is mandatory for cross-platform impression. MUST BE ADDED
          { paramKey: "af_xplatform", keys: [], defaultValue: "true" },
          gclid_out,
          fbclid_out
        ],
      };

      // ** Step 2 ** - Call the Smart Script method generateOneLinkURL(). The method generates the infrastructure to fire an impression in the next step
      // Calling the function after embedding the code will be through a global parameter on the window object called window.AF_SMART_SCRIPT
      var OL_result = window.AF_SMART_SCRIPT.generateOneLinkURL({
        oneLinkURL,
        afParameters: afParameters,
      });


      // ** Step 3 ** - Verify that the returned result from generateOneLinkURL() is not null. If verified, fire the impression.
      // Read more https://dev.appsflyer.com/hc/docs/create-direct-click-url
      if (OL_result) {
        // The following command will fire the impression.
        // The impression will fire to https://impressions.onelink.me//....
        // The wait is a temporary bug fix
        setTimeout(() => {
          window.AF_SMART_SCRIPT.fireImpressionsLink();
          console.log("Impression fired");
        }, 1000);
      }
      // @@@@ Section END - Fire an impression @@@@


      // @@@@ Section START - Create installation links @@@@
      // In this section we will create platform-specific installation links, the link will route the user to the relevant store (e.g. Steam store).


      // For each redirection button in the page we will run the Smart-Script method generateDirectClickURL. If generation is successful,
      // the created link will be placed as the link behind the button.


      // The method generateDirectClickURL accepts the following arguments:
      //  - afParameters: these are the same attribution parameters we've collected to send with the impression in the previous section.
      //  - platform: The platform this link aims for, e.g. steam, epic, playstation etc.
      //  - app_id: The application ID in this platform
      //  - redirectURL: The URL the user will be redirected in order to install the game, e.g. the link in the steam store


      // TODO: update the appid and redirectURL for each platform
      var platforms = {
        nativepc: {
          platformName: "nativepc",
          appid: "PT123456999", // <--- DON'T FORGET TO USE YOUR OWN appid
          redirectURL:
            "https://cdn-nexus.vnggames.com/launcher/installer/nth/Level%20Up%20-%20Nghich%20Thuy%20Han.exe", // <--- DON'T FORGET TO USE YOUR OWN redirect URL (Encoded!)
        },
      };
      // @@@@@@ Remove "af_xplatform=true" custom parameter from the afParamaters
      // Why? This code is reusing afParameters to create both impression link above the direct click URL below.
      // The "af_xplatform=true" is relevant only to the imperssions link, but redundant and even confusing
      // in the direct click URL. This why the following code remove this parameter.
      // Find index of custom parameter "af_xplatform=true" to remove from afCustom array
      const indexToRemove = afParameters.afCustom.findIndex(
        (item) => item.paramKey === "af_xplatform"
      );
      // Remove item from afCustom array at the found index
      if (indexToRemove !== -1) {
        afParameters.afCustom.splice(indexToRemove, 1);
      }
      // @@@ End of "af_xplatform=true" removal
      // iterating the platforms object
      for (const platformKey in platforms) {
        let result_url = "No output from script";
        const platform = platforms[platformKey];
        // generating direct click URL for the platform
        // READ MORE: https://dev.appsflyer.com/hc/docs/create-direct-click-url
        const result = window.AF_SMART_SCRIPT.generateDirectClickURL({
          afParameters: afParameters,
          platform: platform.platformName,
          app_id: platform.appid,
          redirectURL: platform.redirectURL,
        });
        if (result) {
          result_url = result.clickURL;
          // update the href attribute for each store banner
          if (document.getElementById(platformKey + "_link"))
            document
              .getElementById(platformKey + "_link")
              .setAttribute("href", result_url);


          // add the url to the output list of links
          document.getElementById(
            "output_url"
          ).innerHTML += `<b>${platformKey}</b> -> ${result_url} <br/><br/>`;
        }
      }
      // @@@@ Create installation links - Section END @@@@
    </script>


        </head>

    <body class="vn MS__Barlow-Regular" style="height: 634.5px;" data-scale-ratio="0.6345" data-device-type="desktop">

    
    


</body></html>